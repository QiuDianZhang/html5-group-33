<view class="container">
  
  <view class="timer-card {{isTiming ? 'timing-active' : ''}}">
    <view class="timer-header">
      <text class="timer-title">{{isTiming ? 'æ­£åœ¨æ²‰æµ¸é˜…è¯»...' : 'å‡†å¤‡å¥½è¯»ä¹¦äº†å—ï¼Ÿ'}}</text>
      <view class="timer-display">{{timerStr}}</view>
    </view>
    <button class="timer-btn {{isTiming ? 'btn-stop' : 'btn-start'}}" bindtap="toggleTimer">
      {{isTiming ? 'åœæ­¢è®¡æ—¶ & æ‰“å¡' : 'å¼€å§‹è¯»ä¹¦è®¡æ—¶'}}
    </button>
  </view>

  <!-- æœç´¢æ ä¸åŠŸèƒ½åŒº -->
  <view class="action-bar">
    <view class="search-bar">
      <icon type="search" size="14" color="#999"></icon>
      <input placeholder="æœç´¢ä¹¦å/ä½œè€…" bindinput="onSearchInput" value="{{searchKey}}" confirm-type="search"/>
      <icon wx:if="{{searchKey}}" type="clear" size="14" color="#ccc" bindtap="clearSearch"></icon>
    </view>
    
    <!-- è®¾ç½®æŒ‰é’® -->
    <view class="icon-btn setting-btn" bindtap="showSettings">
      <text>âš™ï¸</text>
    </view>
  </view>

  <!-- æ—¥å†å…¥å£ (æŒ‡å‘ ca) -->
  <view class="calendar-entry" bindtap="goCalendar">
    <view class="entry-text">
      <text class="entry-title">è¯»ä¹¦æ—¥å† ğŸ“…</text>
      <text class="entry-desc">ç‚¹å‡»æŸ¥çœ‹æ¯æ—¥é˜…è¯»æ—¶é•¿ç»Ÿè®¡</text>
    </view>
    <view class="entry-arrow">></view>
  </view>

  <!-- ç­›é€‰æ ‡ç­¾ -->
  <view class="tabs">
    <view class="tab {{currentTab=='all'?'active':''}}" bindtap="switchTab" data-type="all">å…¨éƒ¨</view>
    <view class="tab {{currentTab=='want'?'active':''}}" bindtap="switchTab" data-type="want">æƒ³è¯»</view>
    <view class="tab {{currentTab=='reading'?'active':''}}" bindtap="switchTab" data-type="reading">åœ¨è¯»</view>
    <view class="tab {{currentTab=='read'?'active':''}}" bindtap="switchTab" data-type="read">å·²è¯»</view>
  </view>

  <!-- ä¹¦ç±åˆ—è¡¨ -->
  <scroll-view scroll-y class="book-list">
    <block wx:if="{{displayBooks.length > 0}}">
      <view class="book-item" wx:for="{{displayBooks}}" wx:key="id" bindtap="goDetail" data-id="{{item.id}}">
        <image 
  class="book-cover" 
  src="{{item.cover || '/assets/default-cover.png'}}" 
  mode="aspectFill" 
  binderror="onImageError" 
  data-index="{{index}}"
></image>
        <view class="info">
          <view class="info-top">
            <text class="title">{{item.title}}</text>
            <view class="status-tag status-{{item.status}}">
              {{item.status === 'want' ? 'æƒ³è¯»' : (item.status === 'reading' ? 'åœ¨è¯»' : 'å·²è¯»')}}
            </view>
          </view>
          <text class="author">{{item.author}}</text>
          <text class="category" wx:if="{{item.category}}"># {{item.category}}</text>
        </view>
      </view>
    </block>
    <view wx:else class="empty-tip">æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ä¹¦ç±</view>
  </scroll-view>

  <view class="add-btn" bindtap="goAdd">+</view>
</view>